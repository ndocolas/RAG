# docker/Dockerfile.ui (ajustado)
FROM python:3.12-slim

ENV PYTHONUNBUFFERED=1 \
    PYTHONDONTWRITEBYTECODE=1 \
    PIP_NO_CACHE_DIR=1

WORKDIR /app

COPY src/ui/requirements.txt /app/requirements.txt
RUN pip install --upgrade pip && pip install -r /app/requirements.txt

# copie a UI
COPY src/ui /app/src/ui
# copie os módulos que a UI importa
# (se seu repo tiver src/api_routes na raiz use essa linha; se estiver em src/backend/api_routes, troque)
# COPY src/api_routes /app/src/api_routes
COPY src/backend/api_routes /app/src/api_routes

# aqui está o ajuste que faltou:
COPY src/backend/secrets /app/src/secrets

# (se a UI usa algo em services:)
# COPY src/backend/services /app/src/services

ENV PYTHONPATH=/app

EXPOSE 8501
CMD ["streamlit", "run", "src/ui/app.py", "--server.port=8501", "--server.address=0.0.0.0"]
